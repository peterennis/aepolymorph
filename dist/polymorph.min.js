!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((r=r||self).polymorph={})}(this,function(r){"use strict"
var _=void 0,g=" ",c="fill",P="V",b="H",q="L",M="Z",j="M",E="C",C="S",T="Q",V="T",$="A"
var t=Math,F=t.abs,u=t.min,s=t.max,o=t.floor,h=t.round,H=t.sqrt,n=t.pow,I=t.cos,L=t.asin,O=t.sin,Q=t.tan,U=t.PI,Z=2/3,f=n(2,-52)
function G(){throw new Error(Array.prototype.join.call(arguments,g))}var e="undefined"!=typeof window&&window.navigator.userAgent,i=/(MSIE |Trident\/|Edge\/)/i.test(e)?Array:Float32Array
function p(r){return new i(r)}function d(r,t,n){var e=function(r){for(var t=r[0],n=r[1],e=n,i=t,a=2;a<r.length;a+=6){var o=r[a+4],f=r[a+5]
t=u(t,o),i=s(i,o),n=u(n,f),e=s(e,f)}return{x:t,w:i-t,y:n,h:e-n}}(n)
return{x:e.x+e.w*r,y:e.y+e.h*t}}function l(r,t,n,e){return H((r-n)*(r-n)+(t-e)*(t-e))}function v(r,t,n,e){var i=e.length
if(e[i-2]===e[0]&&e[i-1]===e[1]){if(!r){var a=d(t,n,e)
t=a.x,n=a.y}var o,f,u=e.slice(2)
i=u.length
for(var c=0;c<i;c+=6){var s=l(t,t,u[c],u[c+1])
f!==_&&f<=s||(f=s,o=c)}!function(r,t){var n,e=r.length,i=e-t,a=p(t)
for(n=0;n<t;n++)a[n]=r[n]
for(n=t;n<e;n++)r[n-t]=r[n]
for(n=0;n<t;n++)r[i+n]=a[n]}(u,o),e[0]=u[i-2],e[1]=u[i-1]
for(c=0;c<u.length;c++)e[c+2]=u[c]}}function y(r,t){var n=t-r.length,e=Math.ceil(t/r.length),i=p(t)
i[0]=r[0],i[1]=r[1]
for(var a=1,o=1;o<t-1;){i[++o]=r[++a],i[++o]=r[++a],i[++o]=r[++a],i[++o]=r[++a]
var f=i[++o]=r[++a],u=i[++o]=r[++a]
if(n)for(var c=0;c<e&&n;c++)i[o+5]=i[o+3]=i[o+1]=f,i[o+6]=i[o+4]=i[o+2]=u,o+=6,n-=6}return i}function m(r){return r.map(function(r){return{points:r,perimeter:function(r){for(var t=r.length,n=r[t-2],e=r[t-1],i=0,a=0;a<t;a+=6)i+=l(r[a],r[a+1],n,e),n=r[a],e=r[a+1]
return o(i)}(r)}}).sort(function(r,t){return t.perimeter-r.perimeter}).map(function(r){return r.points})}function x(r,t,n){n.optimize===c&&(r=m(r),t=m(t)),r.length!==t.length&&(n.optimize===c?function r(t,n,e){var i=t.length,a=n.length
if(i<a)return r(n,t,e)
n.length=i
for(var o=a;o<i;o++){var f=t[o],u=e.x,c=e.y
if(!e.absolute){var s=d(u,c,f)
u=s.x,c=s.y}for(var l=p(f.length),v=0;v<f.length;v+=2)l[v]=u,l[v+1]=c
n[o]=l}}(r,t,n.origin):G("optimize:none requires equal lengths"))
var e=Array(2)
if(e[0]=r,e[1]=t,n.optimize===c){for(var i=n.origin,a=i.x,o=i.y,f=i.absolute,u=0;u<r.length;u++)v(f,a,o,e[0][u]),v(f,a,o,e[1][u])
!function(r,t){for(var n=r[0].length,e=0;e<n;e++){var i=r[0][e],a=r[1][e],o=s(i.length+t,a.length+t)
r[0][e]=y(i,o),r[1][e]=y(a,o)}}(e,6*n.addPoints)}return e}var w={addPoints:0,optimize:c,origin:{x:0,y:0},precision:0}
function a(r,t){t=function(r,t){for(var n in t)r.hasOwnProperty(n)||(r[n]=t[n])
return r}(t,w),r&&2<=r.length||G("invalid arguments")
for(var e=r.length-1,i=Array(e),n=0;n<e;n++)i[n]=D(r[n],r[n+1],t)
var a=t.precision?function(r){return r.toFixed(t.precision)}:_
return function(r){var t=e*r,n=u(o(t),e-1)
return function(r,t){if(void 0===t&&(t=h),function(r){return"string"==typeof r}(r))return r
for(var n=[],e=0;e<r.length;e++){var i=r[e]
n.push(j,t(i[0]),t(i[1]),E)
for(var a=void 0,o=2;o<i.length;o+=6){var f=t(i[o]),u=t(i[o+1]),c=t(i[o+2]),s=t(i[o+3]),l=t(i[o+4]),v=t(i[o+5])
f==l&&c==l&&u==v&&s==v&&a==(a=""+f+u+c+s+l+v)||n.push(f,u,c,s,l,v)}}return n.join(g)}(i[n]((t-n)/(n+1)),a)}}function D(e,i,r){var a=x(e.getData(),i.getData(),r),o=a[0].length
return function(r){if(F(r-0)<f)return e.getStringData()
if(F(r-1)<f)return i.getStringData()
for(var t=Array(o),n=0;n<o;n++)t[n]=A(a[0][n],a[1][n],r)
return t}}function A(r,t,n){for(var e=r.length,i=p(e),a=0;a<e;a++)i[a]=r[a]+(t[a]-r[a])*n
return i}function S(r,t){return r===_?t:r}var N=120*U/180,k=2*U
function B(r,t,n,e,i,a,o,f,u,c,s,l,v){if(n<=0||e<=0)return[r,t,f,u,f,u]
var g,h=U/180*(+i||0),p=I(h),d=O(h),y=!!c
if(!y){var m=r,x=f,w=((r=m*p-t*-d)-(f=x*p-u*-d))/2,D=((t=m*-d+t*p)-(u=x*-d+u*p))/2,A=w*w/(n*n)+D*D/(e*e)
1<A&&(n*=A=H(A),e*=A)
var S=(a===o?-1:1)*H(F((n*n*e*e-n*n*D*D-e*e*w*w)/(n*n*D*D+e*e*w*w)))
l=S*n*D/e+(r+f)/2,c=L((t-(v=S*-e*w/n+(t+u)/2))/e),s=L((u-v)/e),r<l&&(c=U-c),f<l&&(s=U-s),c<0&&(c+=k),s<0&&(s+=k),o&&s<c&&(c-=k),!o&&c<s&&(s-=k)}if(F(s-c)>N){var z=s,P=f,b=u
g=B(f=l+n*I(s=c+N*(o&&c<s?1:-1)),u=v+e*O(s),n,e,i,0,o,P,b,s,z,l,v)}else g=[]
var q=4/3*Q((s-c)/4)
if(g.splice(0,0,2*r-(r+q*n*O(c)),2*t-(t-q*e*I(c)),f+q*n*O(s),u-q*e*I(s),f,u),!y)for(var M=0,j=g.length;M<j;M+=2){var E=g[M],C=g[M+1]
g[M]=E*p-C*d,g[M+1]=E*d+C*p}return g}var J={M:2,H:1,V:1,L:2,Z:0,C:6,S:4,Q:4,T:2,A:7}
function K(r,t,n,e,i,a,o){var f=r.x,u=r.y
r.x=S(a,f),r.y=S(o,u),r.current.push(S(t,f),n=S(n,u),e=S(e,f),i=S(i,u),r.x,r.y),r.lc=r.c}function R(r){var t=r.c,n=r.t,e=r.x,i=r.y
if(t===P)n[0]+=i
else if(t===b)n[0]+=e
else if(t===$)n[5]+=e,n[6]+=i
else for(var a=0;a<n.length;a+=2)n[a]+=e,n[a+1]+=i}function W(r){return r.split(g).map(z)}function z(r,t){return 0===t?r:+r}function X(r){for(var t={x:0,y:0,segments:[]},n=function(r){return r.replace(/[\^\s]*([mhvlzcsqta]|\-?\d*\.?\d+)[,\$\s]*/gi," $1").replace(/([mhvlzcsqta])/gi," $1").trim().split("  ").map(W)}(r),e=0;e<n.length;e++){var i=n[e],a=i[0],o=a.toUpperCase(),f=o!==M&&o!==a
t.c=o
var u=J[o],c=i,s=1
do{t.t=1===c.length?c:c.slice(s,s+u),f&&R(t)
var l=t.t,v=t.x,g=t.y,h=void 0,p=void 0,d=void 0,y=void 0,m=void 0,x=void 0
if(o===j)t.segments.push(t.current=[t.x=l[0],t.y=l[1]])
else if(o===b)K(t,_,_,_,_,l[0],_)
else if(o===P)K(t,_,_,_,_,_,l[0])
else if(o===q)K(t,_,_,_,_,l[0],l[1])
else if(o===M)K(t,_,_,_,_,t.current[0],t.current[1])
else if(o===E)K(t,l[0],l[1],l[2],l[3],l[4],l[5]),t.cx=l[2],t.cy=l[3]
else if(o===C){var w=t.lc!==C&&t.lc!==E
K(t,h=w?_:2*v-t.cx,p=w?_:2*g-t.cy,l[0],l[1],l[2],l[3]),t.cx=l[0],t.cy=l[1]}else if(o===T){var D=l[0],A=l[1]
d=l[2],y=l[3],K(t,v+(D-v)*Z,g+(A-g)*Z,d+(D-d)*Z,y+(A-y)*Z,d,y),t.cx=D,t.cy=A}else if(o===V)d=l[0],y=l[1],t.lc===T||t.lc===V?(h=v+(2*v-t.cx-v)*Z,p=g+(2*g-t.cy-g)*Z,m=d+(2*v-t.cx-d)*Z,x=y+(2*g-t.cy-y)*Z):(h=m=v,p=x=g),K(t,h,p,m,x,d,y),t.cx=m,t.cy=x
else if(o===$)for(var S=B(v,g,l[0],l[1],l[2],l[3],l[4],l[5],l[6]),z=0;z<S.length;z+=6)K(t,S[z],S[z+1],S[z+2],S[z+3],S[z+4],S[z+5])
else G(t.c," is not supported")
s+=u}while(s<c.length)}return t.segments}var Y=/^([#|\.]|path)/i
var rr=(tr.prototype.getData=function(){return this.data},tr.prototype.getStringData=function(){return this.stringData||(this.stringData=this.render())},tr.prototype.render=function(r){void 0===r&&(r=h)
for(var t=this.data,n=[],e=0;e<t.length;e++){var i=t[e]
n.push(j,r(i[0]),r(i[1]),E)
for(var a=void 0,o=2;o<i.length;o+=6){var f=r(i[o]),u=r(i[o+1]),c=r(i[o+2]),s=r(i[o+3]),l=r(i[o+4]),v=r(i[o+5])
f==l&&c==l&&u==v&&s==v&&a==(a=""+f+u+c+s+l+v)||n.push(f,u,c,s,l,v)}}return n.join(g)},tr)
function tr(r){var t=function(r){if(Array.isArray(r))return{data:r,stringData:_}
var t
if("string"==typeof r&&Y.test(r)?r=document.querySelector(r):t=r,"string"==typeof r)return{data:X(r),stringData:t}
var n=r
return n instanceof SVGPathElement?{data:X(t=n.getAttribute("d")),stringData:t}:G("Unsupported element ",n.tagName)}(r),n=t.data,e=t.stringData
this.data=n,this.stringData=e}r.Path=rr,r.interpolate=function(r,t){return a(r.map(function(r){return new rr(r)}),t||{})},Object.defineProperty(r,"__esModule",{value:!0})})
